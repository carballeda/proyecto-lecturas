{% extends 'libros/base.html' %}

{% block title %}Listado de libros{% endblock %}

{% block content %}
  <div class="lista-libros">
    <h1>Biblioteca</h1>

    <form method="get" action="" class="buscador">
      <input type="text" name="q" placeholder="Buscar por título o autor" value="{{ query }}">
      <button type="submit">Buscar</button>
    </form>

    <ul>
      {% for libro in libros %}
        <li>
          <div class="info-libro">
            <a href="{% url 'libro_detalle' libro.id %}">
              <strong>{{ libro.titulo }}</strong>
            </a>
            {% if libro.autor %}
              <span class="autor">{{ libro.autor }}</span>
            {% endif %}
          </div>

          {% if libro.calificacion %}
            <div class="rating">
              {% for i in "12345" %}
                {% if forloop.counter <= libro.calificacion %}
                  <label>⭐️</label>
                {% else %}
                  <label>☆</label>
                {% endif %}
              {% endfor %}
            </div>
          {% endif %}
        </li>
      {% empty %}
        <li class="empty-message">Nada que mostrar por aquí.</li>
      {% endfor %}
    </ul>
  </div>
{% endblock %}